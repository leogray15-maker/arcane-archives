<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Private Stock List | The Arcane Archives</title>
  <link rel="icon" href="ArcaneA.png" />
  <style>
    :root {
      --bg-dark: #02010a;
      --purple: #9333ea;
      --purple-light: #a78bfa;
      --gold: #fbbf24;
      --text-light: #e5e5e5;
      --text-dim: #a3a3a3;
      --green: #22c55e;
      --red: #ef4444;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: radial-gradient(circle at top, #111827 0, #02010a 45%, #000 100%);
      color: var(--text-light);
      min-height: 100vh;
    }

    .back-btn {
      position: fixed;
      top: 1.2rem;
      left: 1.2rem;
      z-index: 40;
      padding: 0.5rem 1.1rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-dim);
      text-decoration: none;
      font-size: 0.85rem;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      backdrop-filter: blur(12px);
      transition: all 0.2s ease;
    }

    .back-btn:hover {
      color: var(--purple-light);
      border-color: rgba(147, 51, 234, 0.8);
      transform: translateX(-2px);
    }

    .header {
      max-width: 1200px;
      margin: 3rem auto 0;
      padding: 0 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-weight: 800;
      letter-spacing: 0.1em;
      font-size: 0.9rem;
    }

    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1.5rem 4rem;
    }

    .page-card {
      background: radial-gradient(circle at top, rgba(147, 51, 234, 0.18), rgba(15, 23, 42, 0.98));
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      box-shadow: 0 30px 120px rgba(15, 23, 42, 0.85);
      padding: 2rem;
    }

    .page-header {
      margin-bottom: 2rem;
    }

    .page-header h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .page-header h1 span {
      background: linear-gradient(135deg, var(--gold), var(--purple-light));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .page-header p {
      color: var(--text-dim);
    }

    .loading {
      text-align: center;
      padding: 3rem;
      color: var(--text-dim);
    }

    .category-section {
      margin-bottom: 2.5rem;
    }

    .category-header {
      font-size: 1.3rem;
      margin-bottom: 1.2rem;
      color: var(--gold);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .stocks-grid {
      display: grid;
      gap: 1rem;
    }

    .stock-card {
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.4);
      border-radius: 14px;
      padding: 1.5rem;
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 1.5rem;
      transition: all 0.3s;
    }

    .stock-card:hover {
      border-color: var(--purple);
      box-shadow: 0 10px 30px rgba(147, 51, 234, 0.3);
    }

    .stock-main h3 {
      font-size: 1.2rem;
      margin-bottom: 0.4rem;
      display: flex;
      align-items: center;
      gap: 0.7rem;
    }

    .ticker-pill {
      font-size: 0.85rem;
      font-weight: 600;
      padding: 0.2rem 0.7rem;
      border-radius: 999px;
      border: 1px solid rgba(147, 51, 234, 0.8);
      background: rgba(76, 29, 149, 0.25);
    }

    .stock-meta {
      font-size: 0.85rem;
      color: var(--text-dim);
      margin-bottom: 0.7rem;
    }

    .stock-thesis {
      font-size: 0.9rem;
      color: var(--text-light);
      line-height: 1.6;
      margin-bottom: 0.7rem;
    }

    .stock-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.7rem;
    }

    .tag {
      font-size: 0.75rem;
      padding: 0.25rem 0.7rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .tag.risk-low { border-color: rgba(34, 197, 94, 0.7); color: var(--green); }
    .tag.risk-medium { border-color: rgba(234, 179, 8, 0.7); color: #eab308; }
    .tag.risk-high { border-color: rgba(239, 68, 68, 0.7); color: var(--red); }

    .stock-levels {
      display: grid;
      gap: 0.6rem;
    }

    .level-box {
      background: rgba(10, 10, 10, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.3);
      border-radius: 10px;
      padding: 0.7rem;
    }

    .level-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-dim);
      margin-bottom: 0.3rem;
    }

    .level-value {
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--text-light);
    }

    .empty-state {
      text-align: center;
      padding: 2rem;
      color: var(--text-dim);
      background: rgba(15, 23, 42, 0.6);
      border: 1px dashed rgba(148, 163, 184, 0.3);
      border-radius: 12px;
    }

    .disclaimer {
      margin-top: 2rem;
      padding: 1.5rem;
      border-radius: 16px;
      border: 1px dashed rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.8);
      font-size: 0.85rem;
      color: var(--text-dim);
      line-height: 1.7;
    }

    .disclaimer strong {
      color: var(--gold);
    }

    @media (max-width: 768px) {
      .stock-card {
        grid-template-columns: 1fr;
      }

      .page-header h1 {
        font-size: 1.6rem;
      }
    }
  </style>
</head>
<body>
  <a href="dashboard.html" class="back-btn">‚Üê Back</a>

  <div class="header">
    <div class="logo">
      <span>THE ARCANE ARCHIVES</span>
    </div>
  </div>

  <div class="main-content">
    <div class="page-card">
      <div class="page-header">
        <h1>üìà <span>Private Stock List</span></h1>
        <p>Curated equity ideas for Arcane members. Updated regularly based on market conditions.</p>
      </div>

      <div id="loading" class="loading">
        Loading stock picks...
      </div>

      <div id="stocksContent" style="display: none;">
        <div class="category-section">
          <div class="category-header">üíé Core Holdings</div>
          <div id="coreStocks" class="stocks-grid"></div>
        </div>

        <div class="category-section">
          <div class="category-header">‚ö° Tactical / High Conviction</div>
          <div id="tacticalStocks" class="stocks-grid"></div>
        </div>

        <div class="category-section">
          <div class="category-header">üëÄ Watchlist</div>
          <div id="watchlistStocks" class="stocks-grid"></div>
        </div>
      </div>

      <div class="disclaimer">
        <strong>Disclaimer:</strong> This page is for educational purposes only and is not personal investment advice. Nothing here is an offer or solicitation to buy or sell any security. Markets carry risk ‚Äì including the risk of total loss. Always do your own research, size appropriately, and speak to a qualified professional if needed.
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-auth.js";
    import { 
      getFirestore, 
      collection,
      getDocs,
      query,
      orderBy
    } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAK9MheMvSeOpscic4lXUsIwa0J5ubVf6w",
      authDomain: "arcane-archives-3b0f5.firebaseapp.com",
      projectId: "arcane-archives-3b0f5"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    onAuthStateChanged(auth, async (user) => {
      if (!user) {
        window.location.href = 'login.html';
        return;
      }

      // Load stocks
      await loadStocks();
    });

    async function loadStocks() {
      try {
        const q = query(collection(db, 'StockPicks'), orderBy('createdAt', 'desc'));
        const snapshot = await getDocs(q);
        
        const coreStocks = [];
        const tacticalStocks = [];
        const watchlistStocks = [];

        snapshot.forEach((doc) => {
          const stock = { id: doc.id, ...doc.data() };
          if (stock.category === 'core') coreStocks.push(stock);
          else if (stock.category === 'tactical') tacticalStocks.push(stock);
          else if (stock.category === 'watchlist') watchlistStocks.push(stock);
        });

        renderStocks('coreStocks', coreStocks);
        renderStocks('tacticalStocks', tacticalStocks);
        renderStocks('watchlistStocks', watchlistStocks);

        document.getElementById('loading').style.display = 'none';
        document.getElementById('stocksContent').style.display = 'block';
      } catch (error) {
        console.error('Error loading stocks:', error);
        document.getElementById('loading').textContent = 'Error loading stock picks. Please try again later.';
      }
    }

    function renderStocks(containerId, stocks) {
      const container = document.getElementById(containerId);
      
      if (stocks.length === 0) {
        container.innerHTML = '<div class="empty-state">No stocks in this category yet</div>';
        return;
      }

      container.innerHTML = stocks.map(stock => `
        <div class="stock-card">
          <div class="stock-main">
            <h3>
              <span class="ticker-pill">${stock.ticker}</span>
              ${stock.companyName}
            </h3>
            <div class="stock-meta">
              ${stock.sector} ‚Ä¢ ${stock.region || 'N/A'}
            </div>
            <div class="stock-thesis">
              ${stock.thesis}
            </div>
            <div class="stock-tags">
              <span class="tag risk-${stock.riskLevel}">Risk: ${capitalizeFirst(stock.riskLevel)}</span>
              ${stock.timeframe ? `<span class="tag">${stock.timeframe}</span>` : ''}
              ${stock.conviction ? `<span class="tag">Conviction: ${stock.conviction}</span>` : ''}
            </div>
          </div>
          
          <div class="stock-levels">
            ${stock.entryLow || stock.entryHigh ? `
              <div class="level-box">
                <div class="level-label">Entry Zone</div>
                <div class="level-value">
                  ${formatPrice(stock.entryLow)} - ${formatPrice(stock.entryHigh)}
                </div>
              </div>
            ` : ''}
            
            ${stock.target1 || stock.target2 ? `
              <div class="level-box">
                <div class="level-label">Targets</div>
                <div class="level-value">
                  ${formatPrice(stock.target1)}${stock.target2 ? ` / ${formatPrice(stock.target2)}` : ''}
                </div>
              </div>
            ` : ''}
            
            ${stock.stopLoss ? `
              <div class="level-box">
                <div class="level-label">Hard Exit</div>
                <div class="level-value">${formatPrice(stock.stopLoss)}</div>
              </div>
            ` : ''}
          </div>
        </div>
      `).join('');
    }

    function formatPrice(price) {
      if (!price) return 'N/A';
      return '$' + parseFloat(price).toFixed(2);
    }

    function capitalizeFirst(str) {
      if (!str) return '';
      return str.charAt(0).toUpperCase() + str.slice(1);
    }
  </script>
</body>
</html>