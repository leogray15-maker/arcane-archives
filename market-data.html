<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Arcane Intelligence Terminal | The Arcane Archives</title>
  <link rel="icon" href="ArcaneA.png" />
  <link rel="apple-touch-icon" href="ArcaneA.png">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.css" />
  <style>
    :root {
      --bg:           #05050a;
      --bg-panel:     #0a0a12;
      --bg-card:      #0f0f18;
      --border:       rgba(100, 116, 139, 0.11);
      --gold:         #f59e0b;
      --purple:       #9333ea;
      --purple-light: #a78bfa;
      --green:        #10b981;
      --red:          #ef4444;
      --amber:        #f59e0b;
      --live:         #00ff88;
      --text:         #e2e8f0;
      --text-dim:     #64748b;
      --text-muted:   #273444;
      --mono:         'SF Mono','Monaco','Menlo','Consolas',monospace;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    html { scroll-behavior:smooth; }
    body {
      background:var(--bg); color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','Inter','Segoe UI',sans-serif;
      -webkit-font-smoothing:antialiased; overflow-x:hidden;
    }

    /* ‚îÄ‚îÄ FIXED LAYERS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       nav      48px + safe-area
       ticker   40px
       sessbar  34px
       tabs     44px
       total    166px + safe-area
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    nav {
      position:fixed; top:0; left:0; right:0; z-index:1000;
      height:calc(48px + env(safe-area-inset-top,0px));
      background:rgba(5,5,10,0.97);
      backdrop-filter:blur(24px) saturate(180%);
      -webkit-backdrop-filter:blur(24px) saturate(180%);
      border-bottom:1px solid var(--border);
    }
    .nav-inner {
      height:100%; padding:env(safe-area-inset-top,0px) 1.5rem 0;
      display:flex; align-items:center; justify-content:space-between; gap:1rem;
    }
    .nav-logo {
      font-size:.8125rem; font-weight:800;
      background:linear-gradient(135deg,var(--gold) 20%,var(--purple-light) 80%);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      background-clip:text; text-decoration:none; letter-spacing:.07em; text-transform:uppercase;
    }
    .nav-live {
      display:flex; align-items:center; gap:.35rem;
      font-size:.625rem; font-weight:700; color:var(--live);
      text-transform:uppercase; letter-spacing:.14em;
      padding:.25rem .625rem; border:1px solid rgba(0,255,136,.2);
      border-radius:4px; background:rgba(0,255,136,.05);
    }
    .live-dot { width:5px; height:5px; border-radius:50%; background:var(--live); animation:pulseLive 1.4s infinite; }
    @keyframes pulseLive {
      0%,100%{ opacity:1; box-shadow:0 0 5px var(--live); }
      50%    { opacity:.4; box-shadow:none; }
    }
    .nav-btn {
      padding:.375rem .875rem; border:1px solid var(--border); border-radius:6px;
      background:var(--bg-card); color:var(--text-dim); text-decoration:none;
      font-size:.75rem; font-weight:600; transition:all .18s; white-space:nowrap;
    }
    .nav-btn:hover { border-color:var(--purple); color:var(--purple-light); }

    .ticker-strip {
      position:fixed; top:calc(48px + env(safe-area-inset-top,0px));
      left:0; right:0; z-index:999; height:40px;
      background:rgba(5,5,10,.99); border-bottom:1px solid rgba(100,116,139,.06); overflow:hidden;
    }
    .sess-bar {
      position:fixed; top:calc(88px + env(safe-area-inset-top,0px));
      left:0; right:0; z-index:998; height:34px;
      background:rgba(5,5,10,.99); border-bottom:1px solid rgba(100,116,139,.05);
      display:flex; align-items:center; gap:.25rem; padding:0 1rem;
      overflow-x:auto; scrollbar-width:none;
    }
    .sess-bar::-webkit-scrollbar{ display:none; }
    .sess-chip {
      display:flex; align-items:center; gap:.3rem; padding:.175rem .575rem;
      border-radius:4px; border:1px solid transparent; font-size:.625rem; font-weight:700;
      white-space:nowrap; flex-shrink:0; font-variant-numeric:tabular-nums;
      font-family:var(--mono); letter-spacing:.03em;
    }
    .sess-chip.open   { background:rgba(16,185,129,.07); border-color:rgba(16,185,129,.22); color:var(--green); }
    .sess-chip.pre    { background:rgba(245,158,11,.07); border-color:rgba(245,158,11,.22);  color:var(--amber); }
    .sess-chip.closed { background:rgba(100,116,139,.04); border-color:rgba(100,116,139,.07); color:var(--text-muted); }
    .sess-dot { width:5px; height:5px; border-radius:50%; background:currentColor; }
    .sess-chip.open .sess-dot { animation:pulseLive 1.4s infinite; }

    .sec-tabs {
      position:fixed; top:calc(122px + env(safe-area-inset-top,0px));
      left:0; right:0; z-index:997; height:44px;
      background:rgba(5,5,10,.99); border-bottom:1px solid rgba(100,116,139,.09);
      display:flex; align-items:center; gap:.25rem; padding:0 1rem;
      overflow-x:auto; scrollbar-width:none;
    }
    .sec-tabs::-webkit-scrollbar{ display:none; }
    .tab-btn {
      display:flex; align-items:center; gap:.35rem; padding:.35rem .875rem;
      border:1px solid transparent; border-radius:6px; background:transparent;
      color:var(--text-dim); font-size:.6875rem; font-weight:700; text-transform:uppercase;
      letter-spacing:.07em; cursor:pointer; white-space:nowrap; flex-shrink:0;
      transition:all .18s; font-family:inherit;
    }
    .tab-btn:hover { color:var(--text); background:rgba(255,255,255,.03); }
    .tab-btn.active { background:rgba(147,51,234,.1); border-color:rgba(147,51,234,.28); color:var(--purple-light); }
    .tab-icon{ font-size:.8rem; }
    .tabs-div{ width:1px; height:18px; background:var(--border); flex-shrink:0; margin:0 .125rem; }
    .tabs-right{ margin-left:auto; display:flex; align-items:center; gap:.5rem; flex-shrink:0; }
    .utc-clock{ font-size:.6875rem; font-family:var(--mono); font-variant-numeric:tabular-nums; color:var(--text-dim); white-space:nowrap; }

    /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
    main { padding-top:calc(166px + env(safe-area-inset-top,0px)); padding-bottom:4rem; }
    .page-section { padding:1.5rem 1rem 0; scroll-margin-top:calc(166px + env(safe-area-inset-top,0px)); }

    /* SECTION HEADER */
    .s-hdr { display:flex; align-items:center; gap:.75rem; margin-bottom:1rem; padding-bottom:.75rem; border-bottom:1px solid var(--border); }
    .s-hdr-icon{ font-size:1rem; }
    .s-hdr-text{ flex:1; }
    .s-hdr-title{ font-size:.875rem; font-weight:800; color:var(--text); text-transform:uppercase; letter-spacing:.08em; }
    .s-hdr-sub{ font-size:.6rem; color:var(--text-dim); margin-top:.1rem; letter-spacing:.05em; text-transform:uppercase; }
    .s-hdr-badges{ display:flex; align-items:center; gap:.375rem; }
    .badge{ font-size:.575rem; font-weight:700; padding:.175rem .45rem; border-radius:3px; text-transform:uppercase; letter-spacing:.08em; white-space:nowrap; }
    .b-live{ background:rgba(0,255,136,.08); border:1px solid rgba(0,255,136,.22); color:var(--live); }
    .b-ai  { background:rgba(147,51,234,.08); border:1px solid rgba(147,51,234,.22); color:var(--purple-light); }
    .b-hi  { background:rgba(245,158,11,.08); border:1px solid rgba(245,158,11,.22); color:var(--gold); }
    .b-red { background:rgba(239,68,68,.08);  border:1px solid rgba(239,68,68,.22);  color:#ef4444; }
    .b-live::before{ content:'‚óè '; font-size:.45rem; }

    /* GRIDS */
    .g2  { display:grid; grid-template-columns:1fr 1fr; gap:.75rem; }
    .g3  { display:grid; grid-template-columns:1fr 1fr 1fr; gap:.75rem; }
    .g5  { display:grid; grid-template-columns:repeat(5,1fr); gap:.625rem; }
    .g-com{ display:grid; grid-template-columns:repeat(3,1fr); gap:.625rem; }
    .mb  { margin-bottom:.75rem; }

    /* HERO CARDS */
    .hero-card {
      background:var(--bg-panel); border:1px solid var(--border); border-radius:10px;
      padding:.875rem 1rem .5rem; position:relative; overflow:hidden; transition:border-color .2s,box-shadow .2s;
    }
    .hero-card::after{ content:''; position:absolute; inset:0; background:linear-gradient(135deg,transparent 60%,rgba(147,51,234,.04)); pointer-events:none; }
    .hero-card:hover{ border-color:rgba(147,51,234,.35); box-shadow:0 0 24px rgba(147,51,234,.07); }
    .hero-label{ font-size:.6rem; font-weight:700; text-transform:uppercase; letter-spacing:.12em; color:var(--text-dim); margin-bottom:.25rem; }

    /* PANEL */
    .panel{ background:var(--bg-panel); border:1px solid var(--border); border-radius:12px; overflow:hidden; }
    .panel-hdr{ padding:.75rem 1rem; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; background:rgba(255,255,255,.01); }
    .p-title{ font-size:.7rem; font-weight:700; color:var(--text); text-transform:uppercase; letter-spacing:.07em; display:flex; align-items:center; gap:.4rem; }
    .p-sub{ font-size:.575rem; color:var(--text-dim); margin-top:.1rem; text-transform:uppercase; letter-spacing:.05em; }
    .panel-body{ padding:.875rem; }

    /* SESSIONS */
    .sess-list{ display:flex; flex-direction:column; gap:.375rem; }
    .sess-row{ display:grid; grid-template-columns:1.25rem 2.75rem 1fr auto; align-items:center; gap:.5rem; padding:.4rem .6rem; border-radius:6px; border:1px solid transparent; transition:all .2s; }
    .sess-row.open  { background:rgba(16,185,129,.05); border-color:rgba(16,185,129,.13); }
    .sess-row.pre   { background:rgba(245,158,11,.05);  border-color:rgba(245,158,11,.13); }
    .sess-row.closed{ background:rgba(100,116,139,.02); border-color:rgba(100,116,139,.05); opacity:.5; }
    .sr-flag{ font-size:.875rem; }
    .sr-name{ font-size:.675rem; font-weight:700; font-family:var(--mono); }
    .sr-city{ font-size:.575rem; color:var(--text-dim); }
    .sr-time{ font-size:.6rem; color:var(--text-dim); font-family:var(--mono); font-variant-numeric:tabular-nums; }
    .sr-status{ font-size:.55rem; font-weight:700; padding:.125rem .35rem; border-radius:3px; text-transform:uppercase; letter-spacing:.06em; }
    .st-open  { background:rgba(16,185,129,.12); border:1px solid rgba(16,185,129,.28); color:var(--green); }
    .st-pre   { background:rgba(245,158,11,.12);  border:1px solid rgba(245,158,11,.28);  color:var(--amber); }
    .st-closed{ background:rgba(100,116,139,.08); border:1px solid rgba(100,116,139,.1);  color:var(--text-dim); }

    /* FEAR & GREED */
    .fg-wrap{ display:flex; flex-direction:column; align-items:center; }
    .fg-gauge{ position:relative; width:180px; height:100px; margin-bottom:.375rem; }
    .fg-gauge svg{ width:180px; height:100px; }
    .fg-score-pos{ position:absolute; bottom:-4px; left:50%; transform:translateX(-50%); text-align:center; }
    .fg-num{ font-size:2.125rem; font-weight:900; font-variant-numeric:tabular-nums; line-height:1; }
    .fg-lbl{ font-size:.65rem; font-weight:700; text-transform:uppercase; letter-spacing:.1em; text-align:center; margin-bottom:.875rem; margin-top:.375rem; }
    .fg-bands{ display:grid; grid-template-columns:repeat(5,1fr); gap:.2rem; width:100%; }
    .fg-band{ text-align:center; padding:.25rem .1rem; border-radius:4px; font-size:.5rem; font-weight:700; text-transform:uppercase; letter-spacing:.04em; border:1px solid transparent; line-height:1.3; transition:box-shadow .3s; }
    .fg-band.active{ box-shadow:0 0 8px currentColor; }

    /* CRYPTO */
    .cg2{ display:grid; grid-template-columns:1fr 1fr; gap:.5rem; }
    .c-metric{ background:var(--bg-card); border:1px solid var(--border); border-radius:8px; padding:.6rem; }
    .cm-lbl{ font-size:.55rem; font-weight:700; text-transform:uppercase; letter-spacing:.1em; color:var(--text-dim); margin-bottom:.25rem; }
    .cm-val{ font-size:.9375rem; font-weight:700; font-variant-numeric:tabular-nums; color:var(--text); line-height:1; }
    .cm-chg{ font-size:.575rem; font-weight:600; margin-top:.175rem; font-variant-numeric:tabular-nums; }
    .dom-block{ margin-top:.75rem; padding-top:.75rem; border-top:1px solid var(--border); }
    .dom-row{ margin-bottom:.425rem; }
    .dom-lbl{ display:flex; justify-content:space-between; font-size:.575rem; color:var(--text-dim); margin-bottom:.225rem; }
    .dom-val{ font-weight:700; }
    .dom-track{ height:5px; background:rgba(100,116,139,.1); border-radius:3px; overflow:hidden; }
    .dom-fill{ height:100%; border-radius:3px; transition:width 1.2s ease; }

    /* CURRENCY STRENGTH */
    .cur-list{ display:flex; flex-direction:column; gap:.425rem; }
    .cur-row { display:grid; grid-template-columns:3.25rem 1fr 3rem; align-items:center; gap:.5rem; }
    .cur-code{ font-size:.675rem; font-weight:700; font-family:var(--mono); }
    .bar-track{ height:5px; background:rgba(100,116,139,.1); border-radius:3px; overflow:hidden; }
    .bar-fill { height:100%; border-radius:3px; transition:width .9s ease; }
    .cur-val  { font-size:.6rem; font-family:var(--mono); font-variant-numeric:tabular-nums; text-align:right; }

    /* RISK MONITOR */
    .risk-row{ display:grid; grid-template-columns:1fr auto; align-items:center; gap:.625rem; padding:.5rem .625rem; border-radius:7px; background:var(--bg-card); border:1px solid var(--border); }
    .r-lbl { font-size:.675rem; font-weight:700; color:var(--text); }
    .r-desc{ font-size:.575rem; color:var(--text-dim); margin-top:.1rem; }
    .r-right{ display:flex; flex-direction:column; align-items:flex-end; gap:.225rem; }
    .r-lvl { font-size:.575rem; font-weight:700; text-transform:uppercase; letter-spacing:.06em; }
    .r-dots{ display:flex; gap:3px; }
    .r-dot { width:7px; height:7px; border-radius:50%; }
    .r-dot.on { background:currentColor; }
    .r-dot.off{ background:rgba(100,116,139,.14); }

    /* TV WRAP */
    .tv-wrap{ background:var(--bg-panel); border:1px solid var(--border); border-radius:12px; overflow:hidden; }
    .tv-hdr{ padding:.75rem 1rem; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; background:rgba(255,255,255,.01); }
    .tradingview-widget-container { width:100%; height:100%; }
    .tradingview-widget-container__widget { width:100%; height:100%; }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       GEO MAP ‚Äî GLOBAL SITUATION
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .geo-wrap{
      border:1px solid var(--border); border-radius:12px;
      overflow:hidden; display:grid;
      grid-template-columns:1fr 268px;
    }
    .geo-map-col{ position:relative; display:flex; flex-direction:column; }
    .geo-toolbar{
      display:flex; align-items:center; gap:.35rem;
      padding:.55rem .875rem; background:rgba(5,5,10,.97);
      border-bottom:1px solid var(--border); overflow-x:auto;
      scrollbar-width:none; flex-shrink:0;
    }
    .geo-toolbar::-webkit-scrollbar{ display:none; }
    .geo-tlabel{ font-size:.55rem; font-weight:700; text-transform:uppercase; letter-spacing:.1em; color:var(--text-muted); flex-shrink:0; margin-right:.2rem; }
    .geo-btn{
      display:flex; align-items:center; gap:.25rem;
      padding:.2rem .55rem; border:1px solid var(--border); border-radius:4px;
      background:transparent; color:var(--text-dim); font-size:.6rem; font-weight:700;
      cursor:pointer; white-space:nowrap; flex-shrink:0; transition:all .15s; font-family:inherit;
    }
    .geo-btn:hover{ color:var(--text); border-color:rgba(100,116,139,.3); }
    .geo-btn.active{ background:rgba(147,51,234,.1); border-color:rgba(147,51,234,.3); color:var(--purple-light); }
    #geoMap{ flex:1; min-height:480px; background:var(--bg); }

    /* Sidebar */
    .geo-side{
      background:var(--bg-panel); border-left:1px solid var(--border);
      display:flex; flex-direction:column; overflow:hidden;
    }
    .geo-side-inner{ overflow-y:auto; flex:1; padding:.75rem; scrollbar-width:thin; scrollbar-color:rgba(100,116,139,.2) transparent; }
    .geo-side-inner::-webkit-scrollbar{ width:3px; }
    .geo-side-inner::-webkit-scrollbar-track{ background:transparent; }
    .geo-side-inner::-webkit-scrollbar-thumb{ background:rgba(100,116,139,.2); border-radius:2px; }

    /* Risk stats row */
    .geo-stats{ display:grid; grid-template-columns:repeat(3,1fr); gap:.375rem; margin-bottom:.75rem; padding-bottom:.75rem; border-bottom:1px solid var(--border); }
    .geo-stat{ background:var(--bg-card); border:1px solid var(--border); border-radius:6px; padding:.45rem .375rem; text-align:center; }
    .geo-stat-lbl{ font-size:.5rem; font-weight:700; text-transform:uppercase; letter-spacing:.08em; color:var(--text-dim); margin-bottom:.2rem; }
    .geo-stat-val{ font-size:1.375rem; font-weight:900; line-height:1; }

    .geo-group-title{ font-size:.575rem; font-weight:700; text-transform:uppercase; letter-spacing:.1em; color:var(--text-dim); margin-bottom:.4rem; margin-top:.625rem; padding-bottom:.25rem; border-bottom:1px solid rgba(100,116,139,.08); }
    .geo-group-title:first-child{ margin-top:0; }

    .geo-event{
      padding:.4rem .5rem; border-radius:5px; border:1px solid transparent;
      margin-bottom:.275rem; cursor:pointer; transition:all .15s;
    }
    .geo-event:hover{ filter:brightness(1.2); }
    .geo-event.critical{ background:rgba(239,68,68,.05); border-color:rgba(239,68,68,.14); }
    .geo-event.high    { background:rgba(249,115,22,.05); border-color:rgba(249,115,22,.13); }
    .geo-event.elevated{ background:rgba(245,158,11,.04); border-color:rgba(245,158,11,.11); }
    .geo-event.neutral { background:rgba(100,116,139,.04); border-color:rgba(100,116,139,.09); }
    .geo-evname{ font-size:.65rem; font-weight:700; color:var(--text); display:flex; justify-content:space-between; align-items:center; }
    .geo-evdesc{ font-size:.575rem; color:var(--text-dim); margin-top:.1rem; }
    .sev-badge{ font-size:.5rem; font-weight:700; padding:.1rem .3rem; border-radius:2px; text-transform:uppercase; flex-shrink:0; }
    .sev-crit{ background:rgba(239,68,68,.18); color:#ef4444; }
    .sev-high{ background:rgba(249,115,22,.18); color:#f97316; }
    .sev-elev{ background:rgba(245,158,11,.18); color:#f59e0b; }
    .sev-low { background:rgba(100,116,139,.18); color:#94a3b8; }

    /* Leaflet popup override */
    .leaflet-popup-content-wrapper{
      background:rgba(10,10,18,.97) !important;
      border:1px solid rgba(100,116,139,.2) !important;
      border-radius:8px !important;
      box-shadow:0 8px 32px rgba(0,0,0,.5) !important;
      padding:0 !important;
    }
    .leaflet-popup-content{ margin:0 !important; }
    .leaflet-popup-tip-container{ display:none !important; }
    .geo-popup-inner{ padding:.625rem .75rem; }
    .geo-popup-title{ font-size:.75rem; font-weight:700; margin-bottom:.2rem; font-family:sans-serif; }
    .geo-popup-desc{ font-size:.65rem; color:#94a3b8; font-family:sans-serif; }
    .geo-popup-sev{ display:inline-block; margin-top:.3rem; font-size:.55rem; font-weight:700; padding:.1rem .35rem; border-radius:3px; text-transform:uppercase; }

    @keyframes pulseMap{
      0%  { transform:scale(1); opacity:1; }
      50% { transform:scale(1.6); opacity:.5; }
      100%{ transform:scale(1); opacity:1; }
    }
    @keyframes pulseRing{
      0%  { transform:scale(1); opacity:.8; }
      100%{ transform:scale(2.5); opacity:0; }
    }

    /* UTILS */
    .up   { color:var(--green); }
    .down { color:var(--red); }
    .shimmer{ background:linear-gradient(90deg,var(--bg-card) 25%,rgba(255,255,255,.02) 50%,var(--bg-card) 75%); background-size:200% 100%; animation:shimmer 1.5s infinite; border-radius:4px; }
    @keyframes shimmer{ 0%{ background-position:200% 0; } 100%{ background-position:-200% 0; } }
    .panel-note{ font-size:.55rem; color:var(--text-muted); border-top:1px solid var(--border); padding-top:.5rem; margin-top:.625rem; }

    /* RESPONSIVE */
    @media (max-width:1280px){ .g5,.g-com{ grid-template-columns:repeat(3,1fr); } }
    @media (max-width:1024px){
      .g3{ grid-template-columns:1fr 1fr; }
      .geo-wrap{ grid-template-columns:1fr; }
      .geo-side{ border-left:none; border-top:1px solid var(--border); max-height:340px; }
      .geo-stats{ grid-template-columns:repeat(6,1fr); }
    }
    @media (max-width:768px){
      .g5,.g3,.g2,.g-com{ grid-template-columns:1fr 1fr; }
      .page-section{ padding-left:.625rem; padding-right:.625rem; }
      .geo-stats{ grid-template-columns:repeat(3,1fr); }
    }
    @media (max-width:480px){ .g3,.g2{ grid-template-columns:1fr; } }
  </style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="nav-inner">
    <a href="dashboard.html" class="nav-logo">‚¨° Arcane Archives</a>
    <div class="nav-live"><div class="live-dot"></div>Intelligence Terminal</div>
    <a href="alerts.html" class="nav-btn">‚Üê Trading Floor</a>
  </div>
</nav>

<!-- TICKER -->
<div class="ticker-strip">
  <div class="tradingview-widget-container">
    <div class="tradingview-widget-container__widget"></div>
    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
    {"symbols":[
      {"proName":"OANDA:SPX500USD","title":"S&P 500"},
      {"proName":"OANDA:NAS100USD","title":"Nasdaq"},
      {"proName":"OANDA:US30USD","title":"Dow 30"},
      {"proName":"TVC:RUT","title":"Russell 2K"},
      {"proName":"CBOE:VIX","title":"VIX"},
      {"proName":"TVC:DXY","title":"DXY"},
      {"proName":"TVC:US10Y","title":"US 10Y"},
      {"proName":"OANDA:XAUUSD","title":"Gold"},
      {"proName":"OANDA:XAGUSD","title":"Silver"},
      {"proName":"TVC:USOIL","title":"WTI"},
      {"proName":"TVC:UKOIL","title":"Brent"},
      {"proName":"OANDA:NATGASUSD","title":"Nat Gas"},
      {"proName":"BINANCE:BTCUSDT","title":"BTC"},
      {"proName":"BINANCE:ETHUSDT","title":"ETH"},
      {"proName":"BINANCE:SOLUSDT","title":"SOL"},
      {"proName":"FX:EURUSD","title":"EUR/USD"},
      {"proName":"FX:GBPUSD","title":"GBP/USD"},
      {"proName":"FX:USDJPY","title":"USD/JPY"},
      {"proName":"INDEX:FTSE","title":"FTSE"},
      {"proName":"INDEX:DEU40","title":"DAX"},
      {"proName":"INDEX:NI225","title":"Nikkei"},
      {"proName":"INDEX:HSI","title":"Hang Seng"}
    ],"showSymbolLogo":true,"isTransparent":true,"displayMode":"compact","colorTheme":"dark","locale":"en"}
    </script>
  </div>
</div>

<!-- SESSION BAR -->
<div class="sess-bar" id="sessBar"></div>

<!-- SECTION TABS -->
<div class="sec-tabs">
  <button class="tab-btn active" data-tab="overview"    onclick="jumpTo('overview')"><span class="tab-icon">‚ö°</span>Overview</button>
  <button class="tab-btn"        data-tab="global"      onclick="jumpTo('global')"><span class="tab-icon">üåç</span>Global Situation</button>
  <button class="tab-btn"        data-tab="markets"     onclick="jumpTo('markets')"><span class="tab-icon">üìà</span>Markets</button>
  <button class="tab-btn"        data-tab="forex"       onclick="jumpTo('forex')"><span class="tab-icon">üí±</span>Forex</button>
  <button class="tab-btn"        data-tab="commodities" onclick="jumpTo('commodities')"><span class="tab-icon">üèÖ</span>Commodities</button>
  <button class="tab-btn"        data-tab="crypto"      onclick="jumpTo('crypto')"><span class="tab-icon">‚Çø</span>Crypto</button>
  <button class="tab-btn"        data-tab="calendar"    onclick="jumpTo('calendar')"><span class="tab-icon">üìÖ</span>Calendar</button>
  <div class="tabs-div"></div>
  <div class="tabs-right"><div class="utc-clock" id="utcClock">--:--:-- UTC</div></div>
</div>

<main>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       1 ¬∑ OVERVIEW
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section class="page-section" id="overview">
    <div class="s-hdr">
      <span class="s-hdr-icon">‚ö°</span>
      <div class="s-hdr-text">
        <div class="s-hdr-title">Command Center</div>
        <div class="s-hdr-sub">Global snapshot ¬∑ Live sessions ¬∑ Sentiment ¬∑ Crypto intelligence</div>
      </div>
      <div class="s-hdr-badges"><span class="badge b-live">Live</span></div>
    </div>

    <!-- Hero Stats ‚Äî 5 reliable symbols -->
    <div class="g5 mb">
      <div class="hero-card">
        <div class="hero-label">üìà S&P 500</div>
        <div class="tradingview-widget-container" style="height:88px;min-height:unset;">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
          {"symbol":"OANDA:SPX500USD","width":"100%","height":"88","isTransparent":true,"colorTheme":"dark","locale":"en"}
          </script>
        </div>
      </div>
      <div class="hero-card">
        <div class="hero-label">üíª Nasdaq 100</div>
        <div class="tradingview-widget-container" style="height:88px;min-height:unset;">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
          {"symbol":"OANDA:NAS100USD","width":"100%","height":"88","isTransparent":true,"colorTheme":"dark","locale":"en"}
          </script>
        </div>
      </div>
      <div class="hero-card">
        <div class="hero-label">ü•á Gold</div>
        <div class="tradingview-widget-container" style="height:88px;min-height:unset;">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
          {"symbol":"OANDA:XAUUSD","width":"100%","height":"88","isTransparent":true,"colorTheme":"dark","locale":"en"}
          </script>
        </div>
      </div>
      <div class="hero-card">
        <div class="hero-label">‚Çø Bitcoin</div>
        <div class="tradingview-widget-container" style="height:88px;min-height:unset;">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
          {"symbol":"BINANCE:BTCUSDT","width":"100%","height":"88","isTransparent":true,"colorTheme":"dark","locale":"en"}
          </script>
        </div>
      </div>
      <div class="hero-card">
        <div class="hero-label">üí± EUR / USD</div>
        <div class="tradingview-widget-container" style="height:88px;min-height:unset;">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
          {"symbol":"FX:EURUSD","width":"100%","height":"88","isTransparent":true,"colorTheme":"dark","locale":"en"}
          </script>
        </div>
      </div>
    </div>

    <!-- Sessions ¬∑ Sentiment ¬∑ Crypto -->
    <div class="g3">
      <div class="panel">
        <div class="panel-hdr">
          <div><div class="p-title">üåê Market Sessions</div><div class="p-sub">Live exchange hours</div></div>
          <span class="badge b-live">Live</span>
        </div>
        <div class="panel-body">
          <div class="sess-list" id="sessPanel"></div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-hdr">
          <div><div class="p-title">üß† Market Sentiment</div><div class="p-sub">Fear &amp; Greed ¬∑ Alternative.me</div></div>
          <span class="badge b-live">Live</span>
        </div>
        <div class="panel-body">
          <div class="fg-wrap">
            <div class="fg-gauge">
              <svg viewBox="0 0 180 100">
                <defs>
                  <linearGradient id="arcGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%"   stop-color="#ef4444"/>
                    <stop offset="25%"  stop-color="#f97316"/>
                    <stop offset="50%"  stop-color="#eab308"/>
                    <stop offset="75%"  stop-color="#84cc16"/>
                    <stop offset="100%" stop-color="#10b981"/>
                  </linearGradient>
                </defs>
                <path d="M 14 90 A 76 76 0 0 1 166 90" fill="none" stroke="rgba(100,116,139,0.1)" stroke-width="13" stroke-linecap="round"/>
                <path id="fgArc" d="M 14 90 A 76 76 0 0 1 166 90" fill="none" stroke="url(#arcGrad)" stroke-width="13" stroke-linecap="round" stroke-dasharray="239" stroke-dashoffset="239"/>
                <text x="8"   y="100" fill="#ef4444" font-size="7.5" font-weight="700" font-family="sans-serif">FEAR</text>
                <text x="143" y="100" fill="#10b981" font-size="7.5" font-weight="700" font-family="sans-serif">GREED</text>
                <g id="fgNeedle" style="transform-origin:90px 90px;transform:rotate(-90deg);transition:transform 1.5s cubic-bezier(.34,1.56,.64,1);">
                  <line x1="90" y1="90" x2="90" y2="23" stroke="white" stroke-width="2" stroke-linecap="round" opacity=".85"/>
                  <circle cx="90" cy="90" r="4.5" fill="white" opacity=".9"/>
                  <circle cx="90" cy="90" r="2" fill="#05050a"/>
                </g>
              </svg>
              <div class="fg-score-pos"><div class="fg-num" id="fgNum" style="color:#eab308">--</div></div>
            </div>
            <div class="fg-lbl" id="fgLbl" style="color:#eab308">Loading...</div>
            <div class="fg-bands">
              <div class="fg-band" id="fgb0" style="background:rgba(239,68,68,.07);border-color:rgba(239,68,68,.22);color:#ef4444;">Extreme<br>Fear</div>
              <div class="fg-band" id="fgb1" style="background:rgba(249,115,22,.07);border-color:rgba(249,115,22,.22);color:#f97316;">Fear</div>
              <div class="fg-band" id="fgb2" style="background:rgba(234,179,8,.07);border-color:rgba(234,179,8,.22);color:#eab308;">Neutral</div>
              <div class="fg-band" id="fgb3" style="background:rgba(132,204,22,.07);border-color:rgba(132,204,22,.22);color:#84cc16;">Greed</div>
              <div class="fg-band" id="fgb4" style="background:rgba(16,185,129,.07);border-color:rgba(16,185,129,.22);color:#10b981;">Extreme<br>Greed</div>
            </div>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-hdr">
          <div><div class="p-title">‚Çø Crypto Intelligence</div><div class="p-sub">Global crypto market ¬∑ CoinGecko</div></div>
          <span class="badge b-live">Live</span>
        </div>
        <div class="panel-body">
          <div class="cg2">
            <div class="c-metric">
              <div class="cm-lbl">BTC Price</div>
              <div class="cm-val shimmer" id="btcP" style="min-height:1rem;width:80px;">&nbsp;</div>
              <div class="cm-chg" id="btcC"></div>
            </div>
            <div class="c-metric">
              <div class="cm-lbl">ETH Price</div>
              <div class="cm-val shimmer" id="ethP" style="min-height:1rem;width:80px;">&nbsp;</div>
              <div class="cm-chg" id="ethC"></div>
            </div>
            <div class="c-metric">
              <div class="cm-lbl">Total Mkt Cap</div>
              <div class="cm-val shimmer" id="mktC" style="min-height:1rem;width:60px;">&nbsp;</div>
              <div class="cm-chg" id="mktCC"></div>
            </div>
            <div class="c-metric">
              <div class="cm-lbl">24H Volume</div>
              <div class="cm-val shimmer" id="vol" style="min-height:1rem;width:60px;">&nbsp;</div>
              <div class="cm-chg" style="color:var(--text-dim)">Global crypto</div>
            </div>
          </div>
          <div class="dom-block">
            <div class="dom-row">
              <div class="dom-lbl"><span>BTC Dominance</span><span class="dom-val" id="btcD" style="color:var(--gold)">--%</span></div>
              <div class="dom-track"><div class="dom-fill" id="btcDB" style="width:0%;background:linear-gradient(90deg,#d97706,#f59e0b);"></div></div>
            </div>
            <div class="dom-row">
              <div class="dom-lbl"><span>ETH Dominance</span><span class="dom-val" id="ethD" style="color:var(--purple-light)">--%</span></div>
              <div class="dom-track"><div class="dom-fill" id="ethDB" style="width:0%;background:linear-gradient(90deg,#7c3aed,#a78bfa);"></div></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       2 ¬∑ GLOBAL SITUATION
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section class="page-section" id="global">
    <div class="s-hdr">
      <span class="s-hdr-icon">üåç</span>
      <div class="s-hdr-text">
        <div class="s-hdr-title">Global Situation</div>
        <div class="s-hdr-sub">Geopolitical risk ¬∑ Active conflicts ¬∑ Hotspots ¬∑ Financial centers ¬∑ Energy choke points</div>
      </div>
      <div class="s-hdr-badges">
        <span class="badge b-red" id="globalRiskBadge">‚ñ≤ ELEVATED RISK</span>
        <span class="badge b-live">Live</span>
      </div>
    </div>

    <div class="geo-wrap">
      <!-- Map column -->
      <div class="geo-map-col">
        <div class="geo-toolbar">
          <span class="geo-tlabel">Layers:</span>
          <button class="geo-btn active" data-layer="conflicts" onclick="toggleGeoLayer('conflicts')">üî¥ Conflicts</button>
          <button class="geo-btn active" data-layer="hotspots"  onclick="toggleGeoLayer('hotspots')">‚ö° Hotspots</button>
          <button class="geo-btn active" data-layer="markets"   onclick="toggleGeoLayer('markets')">üè¶ Markets</button>
          <button class="geo-btn active" data-layer="energy"    onclick="toggleGeoLayer('energy')">üõ¢Ô∏è Energy</button>
          <button class="geo-btn"        data-layer="nuclear"   onclick="toggleGeoLayer('nuclear')">‚ò¢Ô∏è Nuclear</button>
        </div>
        <div id="geoMap"></div>
      </div>

      <!-- Sidebar -->
      <div class="geo-side">
        <div class="geo-side-inner">
          <!-- Risk stats -->
          <div class="geo-stats">
            <div class="geo-stat"><div class="geo-stat-lbl">Conflicts</div><div class="geo-stat-val" id="gStatConflicts" style="color:#ef4444">9</div></div>
            <div class="geo-stat"><div class="geo-stat-lbl">Hotspots</div><div class="geo-stat-val" id="gStatHotspots"  style="color:#f97316">7</div></div>
            <div class="geo-stat"><div class="geo-stat-lbl">Risk</div><div class="geo-stat-val" id="gStatRisk"      style="color:#f59e0b;font-size:.9rem;margin-top:.1rem;">HIGH</div></div>
          </div>

          <div class="geo-group-title">üî¥ Active Conflicts</div>
          <div id="gListConflicts"></div>

          <div class="geo-group-title">‚ö° Geopolitical Hotspots</div>
          <div id="gListHotspots"></div>

          <div class="geo-group-title">üõ¢Ô∏è Critical Choke Points</div>
          <div id="gListEnergy"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       3 ¬∑ MARKETS
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section class="page-section" id="markets">
    <div class="s-hdr">
      <span class="s-hdr-icon">üìà</span>
      <div class="s-hdr-text">
        <div class="s-hdr-title">Equities &amp; Indices</div>
        <div class="s-hdr-sub">Multi-asset overview ¬∑ Sector heatmap</div>
      </div>
      <div class="s-hdr-badges"><span class="badge b-live">Live</span></div>
    </div>

    <div class="tv-wrap mb">
      <div class="tv-hdr"><div class="p-title">üåê Global Asset Classes</div><span class="badge b-live">Live</span></div>
      <div style="height:560px;">
        <div class="tradingview-widget-container" style="height:100%;">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
          {"colorTheme":"dark","dateRange":"1D","showChart":true,"locale":"en","width":"100%","height":"100%","isTransparent":true,"showSymbolLogo":true,"showFloatingTooltip":true,
           "plotLineColorGrowing":"rgba(16,185,129,1)","plotLineColorFalling":"rgba(239,68,68,1)",
           "gridLineColor":"rgba(42,46,57,0.2)","scaleFontColor":"rgba(100,116,139,1)",
           "belowLineFillColorGrowing":"rgba(16,185,129,0.06)","belowLineFillColorFalling":"rgba(239,68,68,0.06)",
           "belowLineFillColorGrowingBottom":"rgba(16,185,129,0)","belowLineFillColorFallingBottom":"rgba(239,68,68,0)",
           "symbolActiveColor":"rgba(147,51,234,0.1)",
           "tabs":[
             {"title":"US Indices","symbols":[{"s":"OANDA:SPX500USD","d":"S&P 500"},{"s":"OANDA:NAS100USD","d":"Nasdaq 100"},{"s":"OANDA:US30USD","d":"Dow 30"},{"s":"TVC:RUT","d":"Russell 2000"},{"s":"CBOE:VIX","d":"VIX"}]},
             {"title":"World Indices","symbols":[{"s":"INDEX:FTSE","d":"FTSE 100"},{"s":"INDEX:DEU40","d":"DAX"},{"s":"INDEX:NI225","d":"Nikkei 225"},{"s":"INDEX:HSI","d":"Hang Seng"},{"s":"INDEX:CAC40","d":"CAC 40"},{"s":"INDEX:ASX200","d":"ASX 200"}]},
             {"title":"Bonds","symbols":[{"s":"TVC:US10Y","d":"US 10Y"},{"s":"TVC:US02Y","d":"US 2Y"},{"s":"TVC:US30Y","d":"US 30Y"},{"s":"TVC:DE10Y","d":"Germany 10Y"},{"s":"TVC:GB10Y","d":"UK 10Y"},{"s":"TVC:JP10Y","d":"Japan 10Y"}]},
             {"title":"Commodities","symbols":[{"s":"OANDA:XAUUSD","d":"Gold"},{"s":"OANDA:XAGUSD","d":"Silver"},{"s":"TVC:USOIL","d":"WTI Crude"},{"s":"TVC:UKOIL","d":"Brent Crude"},{"s":"OANDA:NATGASUSD","d":"Natural Gas"},{"s":"CBOT:ZC1!","d":"Corn"}]},
             {"title":"Forex","symbols":[{"s":"FX:EURUSD","d":"EUR/USD"},{"s":"FX:GBPUSD","d":"GBP/USD"},{"s":"FX:USDJPY","d":"USD/JPY"},{"s":"TVC:DXY","d":"Dollar Index"},{"s":"FX:AUDUSD","d":"AUD/USD"},{"s":"FX:USDCAD","d":"USD/CAD"}]},
             {"title":"Crypto","symbols":[{"s":"BINANCE:BTCUSDT","d":"Bitcoin"},{"s":"BINANCE:ETHUSDT","d":"Ethereum"},{"s":"BINANCE:SOLUSDT","d":"Solana"},{"s":"BINANCE:BNBUSDT","d":"BNB"},{"s":"BINANCE:XRPUSDT","d":"XRP"},{"s":"BINANCE:AVAXUSDT","d":"Avalanche"}]}
           ]}
          </script>
        </div>
      </div>
    </div>

    <div class="tv-wrap">
      <div class="tv-hdr"><div class="p-title">üìä S&amp;P 500 Sector Heatmap</div><span class="badge b-live">Live</span></div>
      <div style="height:500px;">
        <div class="tradingview-widget-container" style="height:100%;">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js" async>
          {"exchanges":[],"dataSource":"SPX500","grouping":"sector","blockSize":"market_cap_basic","blockColor":"change","locale":"en","colorTheme":"dark","hasTopBar":true,"isDataSetEnabled":true,"isZoomEnabled":true,"hasSymbolTooltip":true,"isTransparent":true,"width":"100%","height":"100%"}
          </script>
        </div>
      </div>
    </div>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       4 ¬∑ FOREX
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section class="page-section" id="forex">
    <div class="s-hdr">
      <span class="s-hdr-icon">üí±</span>
      <div class="s-hdr-text">
        <div class="s-hdr-title">Foreign Exchange</div>
        <div class="s-hdr-sub">Heatmap ¬∑ Cross rates matrix ¬∑ Currency strength ¬∑ Market news</div>
      </div>
      <div class="s-hdr-badges"><span class="badge b-live">Live</span></div>
    </div>

    <div class="g2 mb">
      <div class="tv-wrap">
        <div class="tv-hdr"><div class="p-title">üî• Forex Heatmap</div><span class="badge b-live">Live</span></div>
        <div style="height:420px;">
          <div class="tradingview-widget-container" style="height:100%;">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-forex-heat-map.js" async>
            {"width":"100%","height":"100%","currencies":["EUR","USD","JPY","GBP","CHF","AUD","CAD","NZD","CNY"],"isTransparent":true,"colorTheme":"dark","locale":"en"}
            </script>
          </div>
        </div>
      </div>
      <div class="tv-wrap">
        <div class="tv-hdr"><div class="p-title">üì∞ Market Intelligence Feed</div><span class="badge b-live">Live</span></div>
        <div style="height:420px;">
          <div class="tradingview-widget-container" style="height:100%;">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-timeline.js" async>
            {"feedMode":"all_symbols","isTransparent":true,"displayMode":"regular","width":"100%","height":"100%","colorTheme":"dark","locale":"en"}
            </script>
          </div>
        </div>
      </div>
    </div>

    <div class="tv-wrap mb">
      <div class="tv-hdr"><div class="p-title">üí± Cross Rates Matrix</div><span class="badge b-live">Live</span></div>
      <div style="height:440px;">
        <div class="tradingview-widget-container" style="height:100%;">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-forex-cross-rates.js" async>
          {"width":"100%","height":"100%","currencies":["EUR","USD","JPY","GBP","CHF","AUD","CAD","NZD"],"isTransparent":true,"colorTheme":"dark","locale":"en"}
          </script>
        </div>
      </div>
    </div>

    <div class="panel">
      <div class="panel-hdr">
        <div><div class="p-title">üìè Currency Strength Index</div><div class="p-sub">Relative strength vs basket</div></div>
        <span class="badge b-hi">Indicative</span>
      </div>
      <div class="panel-body"><div class="cur-list" id="curPanel"></div></div>
    </div>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       5 ¬∑ COMMODITIES
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section class="page-section" id="commodities">
    <div class="s-hdr">
      <span class="s-hdr-icon">üèÖ</span>
      <div class="s-hdr-text">
        <div class="s-hdr-title">Commodities &amp; Macro</div>
        <div class="s-hdr-sub">Key commodity markets ¬∑ Macro risk indicators</div>
      </div>
      <div class="s-hdr-badges"><span class="badge b-live">Live</span></div>
    </div>

    <div class="g-com mb">
      <div class="panel">
        <div class="panel-hdr"><div class="p-title">ü•á Gold ¬∑ XAU/USD</div><span class="badge b-live">Live</span></div>
        <div style="height:120px;"><div class="tradingview-widget-container" style="height:100%;"><div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
          {"symbol":"OANDA:XAUUSD","width":"100%","height":"120","locale":"en","dateRange":"1D","colorTheme":"dark","isTransparent":true,"autosize":false}</script></div></div>
      </div>
      <div class="panel">
        <div class="panel-hdr"><div class="p-title">üõ¢Ô∏è WTI Crude Oil</div><span class="badge b-live">Live</span></div>
        <div style="height:120px;"><div class="tradingview-widget-container" style="height:100%;"><div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
          {"symbol":"TVC:USOIL","width":"100%","height":"120","locale":"en","dateRange":"1D","colorTheme":"dark","isTransparent":true,"autosize":false}</script></div></div>
      </div>
      <div class="panel">
        <div class="panel-hdr"><div class="p-title">ü•à Silver ¬∑ XAG/USD</div><span class="badge b-live">Live</span></div>
        <div style="height:120px;"><div class="tradingview-widget-container" style="height:100%;"><div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
          {"symbol":"OANDA:XAGUSD","width":"100%","height":"120","locale":"en","dateRange":"1D","colorTheme":"dark","isTransparent":true,"autosize":false}</script></div></div>
      </div>
      <div class="panel">
        <div class="panel-hdr"><div class="p-title">üî• Natural Gas</div><span class="badge b-live">Live</span></div>
        <div style="height:120px;"><div class="tradingview-widget-container" style="height:100%;"><div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
          {"symbol":"OANDA:NATGASUSD","width":"100%","height":"120","locale":"en","dateRange":"1D","colorTheme":"dark","isTransparent":true,"autosize":false}</script></div></div>
      </div>
      <div class="panel">
        <div class="panel-hdr"><div class="p-title">üî¥ Copper</div><span class="badge b-live">Live</span></div>
        <div style="height:120px;"><div class="tradingview-widget-container" style="height:100%;"><div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
          {"symbol":"OANDA:XCUUSD","width":"100%","height":"120","locale":"en","dateRange":"1D","colorTheme":"dark","isTransparent":true,"autosize":false}</script></div></div>
      </div>
      <div class="panel">
        <div class="panel-hdr"><div class="p-title">‚õΩ Brent Crude</div><span class="badge b-live">Live</span></div>
        <div style="height:120px;"><div class="tradingview-widget-container" style="height:100%;"><div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
          {"symbol":"TVC:UKOIL","width":"100%","height":"120","locale":"en","dateRange":"1D","colorTheme":"dark","isTransparent":true,"autosize":false}</script></div></div>
      </div>
    </div>

    <div class="panel">
      <div class="panel-hdr">
        <div><div class="p-title">‚ö° Macro Risk Monitor</div><div class="p-sub">Qualitative assessment ¬∑ Updated periodically</div></div>
        <span class="badge b-ai">Intelligence</span>
      </div>
      <div class="panel-body">
        <div id="riskPanel" style="display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem;"></div>
      </div>
    </div>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       6 ¬∑ CRYPTO
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section class="page-section" id="crypto">
    <div class="s-hdr">
      <span class="s-hdr-icon">‚Çø</span>
      <div class="s-hdr-text">
        <div class="s-hdr-title">Digital Assets</div>
        <div class="s-hdr-sub">Full crypto market screener ¬∑ Top 100 assets</div>
      </div>
      <div class="s-hdr-badges"><span class="badge b-live">Live</span></div>
    </div>
    <div class="tv-wrap">
      <div class="tv-hdr"><div class="p-title">‚Çø Crypto Market Screener</div><span class="badge b-live">Live</span></div>
      <div style="height:600px;">
        <div class="tradingview-widget-container" style="height:100%;">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js" async>
          {"width":"100%","height":"100%","defaultColumn":"overview","screener_type":"crypto_mkt","displayCurrency":"USD","colorTheme":"dark","isTransparent":true,"locale":"en"}
          </script>
        </div>
      </div>
    </div>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       7 ¬∑ CALENDAR
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section class="page-section" id="calendar">
    <div class="s-hdr">
      <span class="s-hdr-icon">üìÖ</span>
      <div class="s-hdr-text">
        <div class="s-hdr-title">Economic Intelligence</div>
        <div class="s-hdr-sub">High-impact events ¬∑ Central bank decisions ¬∑ G8 economies</div>
      </div>
      <div class="s-hdr-badges"><span class="badge b-hi">High Impact</span><span class="badge b-live">Live</span></div>
    </div>
    <div class="tv-wrap">
      <div class="tv-hdr"><div class="p-title">üìÖ Economic Calendar</div><span class="badge b-live">Live</span></div>
      <div style="height:620px;">
        <div class="tradingview-widget-container" style="height:100%;">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-events.js" async>
          {"colorTheme":"dark","isTransparent":true,"width":"100%","height":"100%","locale":"en","importanceFilter":"0,1","countryFilter":"us,eu,gb,jp,cn,au,ca,ch"}
          </script>
        </div>
      </div>
    </div>
  </section>

</main>

<script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.js"></script>
<script>
(function () {
  'use strict';

  // ‚îÄ‚îÄ MARKET SESSIONS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const SESSIONS = [
    { name:'NYSE',  city:'New York',  flag:'üá∫üá∏', tz:'America/New_York',  open:[9,30],  close:[16,0],  pre:[4,0] },
    { name:'LSE',   city:'London',    flag:'üá¨üáß', tz:'Europe/London',     open:[8,0],   close:[16,30], pre:null  },
    { name:'XETRA', city:'Frankfurt', flag:'üá©üá™', tz:'Europe/Berlin',     open:[9,0],   close:[17,30], pre:null  },
    { name:'TSE',   city:'Tokyo',     flag:'üáØüáµ', tz:'Asia/Tokyo',        open:[9,0],   close:[15,0],  pre:null  },
    { name:'HKEX',  city:'Hong Kong', flag:'üá≠üá∞', tz:'Asia/Hong_Kong',    open:[9,30],  close:[16,0],  pre:null  },
    { name:'SSE',   city:'Shanghai',  flag:'üá®üá≥', tz:'Asia/Shanghai',     open:[9,30],  close:[15,0],  pre:null  },
    { name:'ASX',   city:'Sydney',    flag:'üá¶üá∫', tz:'Australia/Sydney',  open:[10,0],  close:[16,0],  pre:null  },
  ];

  function localAt(tz) { return new Date(new Date().toLocaleString('en-US',{timeZone:tz})); }
  function mins(h,m)   { return h*60+m; }

  function getStatus(s) {
    var t=localAt(s.tz), day=t.getDay(), now=mins(t.getHours(),t.getMinutes());
    if(day===0||day===6) return 'closed';
    if(now>=mins(s.open[0],s.open[1])&&now<mins(s.close[0],s.close[1])) return 'open';
    if(s.pre&&now>=mins(s.pre[0],s.pre[1])&&now<mins(s.open[0],s.open[1])) return 'pre';
    return 'closed';
  }
  function fmtTime(tz) { return localAt(tz).toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',hour12:false}); }

  function renderSessions() {
    var panel=document.getElementById('sessPanel'), bar=document.getElementById('sessBar');
    if(!panel||!bar) return;
    panel.innerHTML = SESSIONS.map(function(s){
      var st=getStatus(s),t=fmtTime(s.tz);
      var cls=st==='open'?'st-open':st==='pre'?'st-pre':'st-closed';
      var lbl=st==='open'?'‚óè OPEN':st==='pre'?'‚óê PRE':'CLOSED';
      return '<div class="sess-row '+st+'"><span class="sr-flag">'+s.flag+'</span><span class="sr-name">'+s.name+'</span><div><div class="sr-city">'+s.city+'</div><div class="sr-time">'+t+'</div></div><span class="sr-status '+cls+'">'+lbl+'</span></div>';
    }).join('');
    bar.innerHTML = SESSIONS.map(function(s){
      var st=getStatus(s),t=fmtTime(s.tz);
      return '<div class="sess-chip '+st+'"><div class="sess-dot"></div>'+s.flag+' '+s.name+' <span style="opacity:.65">'+t+'</span></div>';
    }).join('');
  }

  // ‚îÄ‚îÄ CLOCK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function tick() {
    var el=document.getElementById('utcClock');
    if(el) el.textContent=new Date().toLocaleTimeString('en-US',{timeZone:'UTC',hour12:false})+' UTC';
    renderSessions();
  }

  // ‚îÄ‚îÄ SCROLLSPY ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  var SIDS=['overview','global','markets','forex','commodities','crypto','calendar'];
  window.addEventListener('scroll',function(){
    var cur=SIDS[0];
    SIDS.forEach(function(id){var el=document.getElementById(id);if(el&&el.getBoundingClientRect().top<=220)cur=id;});
    document.querySelectorAll('.tab-btn').forEach(function(b){b.classList.toggle('active',b.dataset.tab===cur);});
  },{passive:true});

  window.jumpTo=function(id){var el=document.getElementById(id);if(el)el.scrollIntoView({behavior:'smooth'});};

  // ‚îÄ‚îÄ FEAR & GREED ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  async function fetchFG() {
    try {
      var r=await fetch('https://api.alternative.me/fng/?limit=1');
      var d=await r.json(); var v=parseInt(d.data[0].value);
      var label=d.data[0].value_classification;
      var color=v<=25?'#ef4444':v<=45?'#f97316':v<=55?'#eab308':v<=75?'#84cc16':'#10b981';
      var ne=document.getElementById('fgNum'),le=document.getElementById('fgLbl');
      if(ne){ne.textContent=v;ne.style.color=color;}
      if(le){le.textContent=label.toUpperCase();le.style.color=color;}
      var ndl=document.getElementById('fgNeedle');
      if(ndl){ndl.style.transform='rotate('+(v/100*180-90)+'deg)';ndl.style.transformOrigin='90px 90px';}
      var arc=document.getElementById('fgArc');
      if(arc) arc.style.strokeDashoffset=239-(v/100)*239;
      ['fgb0','fgb1','fgb2','fgb3','fgb4'].forEach(function(id){var b=document.getElementById(id);if(b)b.classList.remove('active');});
      var idx=v<=25?0:v<=45?1:v<=55?2:v<=75?3:4;
      var ab=document.getElementById('fgb'+idx);if(ab)ab.classList.add('active');
    } catch(e){var le=document.getElementById('fgLbl');if(le)le.textContent='DATA UNAVAILABLE';}
  }

  // ‚îÄ‚îÄ CRYPTO ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function bigNum(n){if(n>=1e12)return'$'+(n/1e12).toFixed(2)+'T';if(n>=1e9)return'$'+(n/1e9).toFixed(2)+'B';if(n>=1e6)return'$'+(n/1e6).toFixed(1)+'M';return'$'+n.toLocaleString();}
  function setEl(id,val,cls){var el=document.getElementById(id);if(!el)return;el.classList.remove('shimmer');el.textContent=val;if(cls)el.className=cls;}

  async function fetchCrypto() {
    try {
      var res=await Promise.all([fetch('https://api.coingecko.com/api/v3/global'),fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd&include_24hr_change=true')]);
      var g=(await res[0].json()).data,p=await res[1].json();
      var btc=p.bitcoin,eth=p.ethereum;
      setEl('btcP','$'+btc.usd.toLocaleString('en-US',{maximumFractionDigits:0}));
      var bc=btc.usd_24h_change.toFixed(2);setEl('btcC',(bc>=0?'+':'')+bc+'%','cm-chg '+(bc>=0?'up':'down'));
      setEl('ethP','$'+eth.usd.toLocaleString('en-US',{maximumFractionDigits:0}));
      var ec=eth.usd_24h_change.toFixed(2);setEl('ethC',(ec>=0?'+':'')+ec+'%','cm-chg '+(ec>=0?'up':'down'));
      setEl('mktC',bigNum(g.total_market_cap.usd));
      var mc=g.market_cap_change_percentage_24h_usd.toFixed(2);setEl('mktCC',(mc>=0?'+':'')+mc+'% 24h','cm-chg '+(mc>=0?'up':'down'));
      setEl('vol',bigNum(g.total_volume.usd));
      var bd=g.market_cap_percentage.btc.toFixed(1),ed=g.market_cap_percentage.eth.toFixed(1);
      setEl('btcD',bd+'%');setEl('ethD',ed+'%');
      var bb=document.getElementById('btcDB'),eb=document.getElementById('ethDB');
      if(bb)bb.style.width=bd+'%';if(eb)eb.style.width=ed+'%';
    } catch(e){}
  }

  // ‚îÄ‚îÄ CURRENCY STRENGTH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  var CURRENCIES=[
    {code:'USD',flag:'üá∫üá∏',color:'#60a5fa',val:72},{code:'EUR',flag:'üá™üá∫',color:'#818cf8',val:58},
    {code:'GBP',flag:'üá¨üáß',color:'#a78bfa',val:52},{code:'JPY',flag:'üáØüáµ',color:'#f472b6',val:42},
    {code:'CHF',flag:'üá®üá≠',color:'#34d399',val:68},{code:'AUD',flag:'üá¶üá∫',color:'#fbbf24',val:45},
    {code:'CAD',flag:'üá®üá¶',color:'#fb923c',val:48},{code:'NZD',flag:'üá≥üáø',color:'#a3e635',val:40},
  ];
  function renderCurrencies(){
    var el=document.getElementById('curPanel');if(!el)return;
    var mx=Math.max.apply(null,CURRENCIES.map(function(c){return c.val;}));
    el.innerHTML=CURRENCIES.map(function(c){
      var pct=(c.val/mx*100).toFixed(0),st=c.val>55;
      return '<div class="cur-row"><div class="cur-code">'+c.flag+' '+c.code+'</div><div class="bar-track"><div class="bar-fill" style="width:'+pct+'%;background:'+c.color+';"></div></div><div class="cur-val '+(st?'up':'down')+'">'+(st?'‚ñ≤':'‚ñº')+' '+c.val+'</div></div>';
    }).join('');
  }

  // ‚îÄ‚îÄ MACRO RISK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  var RISKS=[
    {label:'Yield Curve',   desc:'2Y-10Y spread',        level:'ELEVATED',dots:3,color:'#f97316'},
    {label:'Credit Spreads',desc:'HY vs IG bonds',        level:'MODERATE', dots:2,color:'#eab308'},
    {label:'Geopolitical',  desc:'Global conflict index', level:'HIGH',     dots:4,color:'#ef4444'},
    {label:'Inflation',     desc:'CPI trend momentum',    level:'MODERATE', dots:2,color:'#eab308'},
    {label:'USD Liquidity', desc:'Fed balance sheet',     level:'LOW',      dots:1,color:'#10b981'},
    {label:'Volatility',    desc:'VIX regime',            level:'MODERATE', dots:2,color:'#eab308'},
  ];
  function renderRisk(){
    var el=document.getElementById('riskPanel');if(!el)return;
    el.innerHTML=RISKS.map(function(r){
      return '<div class="risk-row"><div><div class="r-lbl">'+r.label+'</div><div class="r-desc">'+r.desc+'</div></div><div class="r-right"><span class="r-lvl" style="color:'+r.color+'">'+r.level+'</span><div class="r-dots">'+[1,2,3,4,5].map(function(d){return'<div class="r-dot '+(d<=r.dots?'on':'off')+'" style="'+(d<=r.dots?'background:'+r.color:'')+'"></div>';}).join('')+'</div></div></div>';
    }).join('');
  }

  // ‚îÄ‚îÄ GEO MAP ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  var CONFLICTS=[
    {lat:49.0,lng:31.0,  name:'Ukraine',          detail:'Russia-Ukraine War',          sev:'critical'},
    {lat:31.5,lng:34.5,  name:'Gaza Strip',        detail:'Israel-Hamas Conflict',       sev:'critical'},
    {lat:15.5,lng:30.5,  name:'Sudan',             detail:'Sudanese Civil War',          sev:'critical'},
    {lat:19.0,lng:96.0,  name:'Myanmar',           detail:'Military Junta vs Resistance',sev:'high'},
    {lat:13.5,lng: 2.0,  name:'Sahel Region',      detail:'Jihadist Insurgencies',       sev:'high'},
    {lat:15.3,lng:44.2,  name:'Yemen',             detail:'Houthi-Saudi Conflict',       sev:'high'},
    {lat:18.5,lng:-72.3, name:'Haiti',             detail:'Gang Violence / State Collapse',sev:'high'},
    {lat: 8.5,lng:38.5,  name:'Ethiopia',          detail:'Amhara / Oromia Conflict',    sev:'elevated'},
    {lat:11.0,lng:43.1,  name:'Horn of Africa',    detail:'Regional Instability',        sev:'elevated'},
  ];

  var HOTSPOTS=[
    {lat:23.5, lng:119.5, name:'Taiwan Strait',       detail:'China-Taiwan Military Tensions',sev:'critical'},
    {lat:10.0, lng:113.0, name:'South China Sea',     detail:'Territorial Disputes',          sev:'high'},
    {lat:38.0, lng:127.5, name:'Korean Peninsula',    detail:'DPRK Missile Provocations',     sev:'high'},
    {lat:32.0, lng: 53.0, name:'Iran',                detail:'Nuclear Program & Regional Proxy',sev:'high'},
    {lat:34.5, lng: 77.5, name:'Kashmir',             detail:'India-Pakistan Standoff',       sev:'elevated'},
    {lat: 6.0, lng:-66.0, name:'Venezuela-Guyana',    detail:'Essequibo Border Dispute',      sev:'elevated'},
    {lat:40.2, lng: 47.0, name:'South Caucasus',      detail:'Armenia-Azerbaijan Tensions',   sev:'elevated'},
  ];

  var ENERGY=[
    {lat:26.5, lng: 56.5, name:'Strait of Hormuz',   detail:'~20% of global oil transit',  icon:'üõ¢Ô∏è'},
    {lat:30.0, lng: 32.5, name:'Suez Canal',          detail:'~12% of global trade route',  icon:'‚öì'},
    {lat: 1.5, lng:103.5, name:'Strait of Malacca',   detail:'~40% of global shipping',     icon:'‚öì'},
    {lat:61.0, lng:  2.5, name:'North Sea',           detail:'Brent crude production hub',  icon:'üõ¢Ô∏è'},
    {lat:30.5, lng: 47.5, name:'Persian Gulf',        detail:'Major oil export corridor',   icon:'üõ¢Ô∏è'},
    {lat:28.0, lng:-100.0,name:'Permian Basin',       detail:'US shale production center',  icon:'‚õΩ'},
    {lat:65.0, lng: 55.0, name:'West Siberia',        detail:'Russia gas pipeline network', icon:'üî•'},
  ];

  var NUCLEAR=[
    {lat:38.9, lng:-77.0, name:'USA',         detail:'~5,500 warheads'},
    {lat:55.75,lng: 37.6, name:'Russia',      detail:'~6,200 warheads'},
    {lat:51.5, lng: -0.1, name:'UK',          detail:'~225 warheads'},
    {lat:48.85,lng:  2.35,name:'France',      detail:'~290 warheads'},
    {lat:39.9, lng:116.4, name:'China',       detail:'~350 warheads'},
    {lat:28.7, lng: 77.1, name:'India',       detail:'~160 warheads'},
    {lat:33.7, lng: 73.1, name:'Pakistan',    detail:'~160 warheads'},
    {lat:31.8, lng: 35.2, name:'Israel',      detail:'~90 warheads (est.)'},
    {lat:39.0, lng:127.0, name:'North Korea', detail:'~40-50 warheads'},
  ];

  var MARKETS=[
    {lat:40.71,lng:-74.01,name:'New York',   exchange:'NYSE / NASDAQ',   session:'NYSE'},
    {lat:51.51,lng: -0.13,name:'London',     exchange:'LSE',             session:'LSE'},
    {lat:50.11,lng:  8.68,name:'Frankfurt',  exchange:'XETRA',           session:'XETRA'},
    {lat:35.68,lng:139.65,name:'Tokyo',      exchange:'TSE',             session:'TSE'},
    {lat:22.32,lng:114.17,name:'Hong Kong',  exchange:'HKEX',            session:'HKEX'},
    {lat:31.23,lng:121.47,name:'Shanghai',   exchange:'SSE',             session:'SSE'},
    {lat:-33.87,lng:151.21,name:'Sydney',    exchange:'ASX',             session:'ASX'},
    {lat:19.08,lng: 72.88,name:'Mumbai',     exchange:'BSE / NSE',       session:null},
    {lat: 1.35,lng:103.82,name:'Singapore',  exchange:'SGX',             session:null},
    {lat:43.65,lng:-79.38,name:'Toronto',    exchange:'TSX',             session:null},
  ];

  var geoLayers={}, geoMap=null;

  function sevColor(sev){ return sev==='critical'?'#ef4444':sev==='high'?'#f97316':'#f59e0b'; }

  function popHtml(title,desc,sev,titleColor){
    var bg=sev==='critical'?'rgba(239,68,68,.15)':sev==='high'?'rgba(249,115,22,.15)':'rgba(245,158,11,.15)';
    return '<div class="geo-popup-inner"><div class="geo-popup-title" style="color:'+(titleColor||sevColor(sev))+'">'+title+'</div><div class="geo-popup-desc">'+desc+'</div><div class="geo-popup-sev" style="background:'+bg+';color:'+(titleColor||sevColor(sev))+'">'+sev.toUpperCase()+'</div></div>';
  }

  function initGeoMap(){
    if(typeof L==='undefined'||!document.getElementById('geoMap')) return;

    geoMap=L.map('geoMap',{center:[25,15],zoom:2,zoomControl:false,attributionControl:false,minZoom:2,maxZoom:6,worldCopyJump:true});

    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',{subdomains:'abcd',maxZoom:6}).addTo(geoMap);
    L.control.zoom({position:'topright'}).addTo(geoMap);
    L.control.attribution({position:'bottomright',prefix:false}).addAttribution('¬© CartoDB').addTo(geoMap);

    geoLayers.conflicts = L.layerGroup();
    geoLayers.hotspots  = L.layerGroup();
    geoLayers.markets   = L.layerGroup();
    geoLayers.energy    = L.layerGroup();
    geoLayers.nuclear   = L.layerGroup();

    // Conflicts ‚Äî pulsing filled circles
    CONFLICTS.forEach(function(c){
      var col=sevColor(c.sev), sz=c.sev==='critical'?14:c.sev==='high'?11:9;
      var icon=L.divIcon({className:'',iconSize:[sz*3,sz*3],iconAnchor:[sz*1.5,sz*1.5],
        html:'<div style="position:relative;width:'+(sz*3)+'px;height:'+(sz*3)+'px;display:flex;align-items:center;justify-content:center;">'
            +'<div style="position:absolute;width:'+(sz*3)+'px;height:'+(sz*3)+'px;border-radius:50%;background:'+col+'22;animation:pulseRing 2s ease-out infinite;"></div>'
            +'<div style="width:'+sz+'px;height:'+sz+'px;border-radius:50%;background:'+col+';box-shadow:0 0 '+(sz*1.5)+'px '+col+'80;animation:pulseMap 2s ease-in-out infinite;"></div>'
            +'</div>'
      });
      L.marker([c.lat,c.lng],{icon:icon}).bindPopup(popHtml('üî¥ '+c.name,c.detail,c.sev),{maxWidth:200,className:'geo-popup-wrap'}).addTo(geoLayers.conflicts);
    });

    // Hotspots ‚Äî hollow pulsing rings
    HOTSPOTS.forEach(function(h){
      var col=sevColor(h.sev);
      var icon=L.divIcon({className:'',iconSize:[18,18],iconAnchor:[9,9],
        html:'<div style="position:relative;width:18px;height:18px;display:flex;align-items:center;justify-content:center;">'
            +'<div style="position:absolute;inset:0;border-radius:50%;border:1.5px solid '+col+';opacity:.5;animation:pulseRing 2.5s ease-out infinite;"></div>'
            +'<div style="width:8px;height:8px;border-radius:50%;border:2px solid '+col+';background:transparent;"></div>'
            +'</div>'
      });
      L.marker([h.lat,h.lng],{icon:icon}).bindPopup(popHtml('‚ö° '+h.name,h.detail,h.sev),{maxWidth:200,className:'geo-popup-wrap'}).addTo(geoLayers.hotspots);
    });

    // Markets ‚Äî diamond markers, green if open
    MARKETS.forEach(function(m){
      var isOpen=m.session&&getStatus(SESSIONS.find(function(s){return s.name===m.session;})||{})==='open';
      var col=isOpen?'#00ff88':'#64748b';
      var icon=L.divIcon({className:'',iconSize:[10,10],iconAnchor:[5,5],
        html:'<div style="width:8px;height:8px;background:'+col+';transform:rotate(45deg);box-shadow:0 0 8px '+col+'80;'+(isOpen?'animation:pulseMap 2.2s ease-in-out infinite;':'')+'"></div>'
      });
      L.marker([m.lat,m.lng],{icon:icon})
        .bindPopup('<div class="geo-popup-inner"><div class="geo-popup-title" style="color:'+col+'">üè¶ '+m.name+'</div><div class="geo-popup-desc">'+m.exchange+'</div><div class="geo-popup-sev" style="background:'+(isOpen?'rgba(0,255,136,.15)':'rgba(100,116,139,.15)')+';color:'+col+'">'+(isOpen?'MARKET OPEN':'MARKET CLOSED')+'</div></div>',{maxWidth:180,className:'geo-popup-wrap'})
        .addTo(geoLayers.markets);
    });

    // Energy ‚Äî emoji markers
    ENERGY.forEach(function(e){
      var icon=L.divIcon({className:'',iconSize:[14,14],iconAnchor:[7,7],
        html:'<div style="font-size:11px;line-height:1;filter:drop-shadow(0 0 4px rgba(245,158,11,.6));">'+e.icon+'</div>'
      });
      L.marker([e.lat,e.lng],{icon:icon})
        .bindPopup('<div class="geo-popup-inner"><div class="geo-popup-title" style="color:#f59e0b">'+e.icon+' '+e.name+'</div><div class="geo-popup-desc">'+e.detail+'</div></div>',{maxWidth:200,className:'geo-popup-wrap'})
        .addTo(geoLayers.energy);
    });

    // Nuclear ‚Äî ‚ò¢Ô∏è markers
    NUCLEAR.forEach(function(n){
      var icon=L.divIcon({className:'',iconSize:[12,12],iconAnchor:[6,6],
        html:'<div style="font-size:9px;line-height:1;opacity:.65;filter:drop-shadow(0 0 3px rgba(167,139,250,.5));">‚ò¢Ô∏è</div>'
      });
      L.marker([n.lat,n.lng],{icon:icon})
        .bindPopup('<div class="geo-popup-inner"><div class="geo-popup-title" style="color:#a78bfa">‚ò¢Ô∏è '+n.name+'</div><div class="geo-popup-desc">'+n.detail+'</div></div>',{maxWidth:180,className:'geo-popup-wrap'})
        .addTo(geoLayers.nuclear);
    });

    // Add default layers
    geoLayers.conflicts.addTo(geoMap);
    geoLayers.hotspots.addTo(geoMap);
    geoLayers.markets.addTo(geoMap);
    geoLayers.energy.addTo(geoMap);

    renderGeoSidebar();
  }

  window.toggleGeoLayer=function(name){
    var btn=document.querySelector('.geo-btn[data-layer="'+name+'"]');
    if(!btn||!geoMap) return;
    if(geoMap.hasLayer(geoLayers[name])){ geoMap.removeLayer(geoLayers[name]); btn.classList.remove('active'); }
    else { geoLayers[name].addTo(geoMap); btn.classList.add('active'); }
  };

  window.flyToGeo=function(lat,lng){
    if(geoMap) geoMap.flyTo([lat,lng],5,{duration:1.2});
    document.getElementById('global').scrollIntoView({behavior:'smooth'});
  };

  function sevBadge(sev){
    var cls=sev==='critical'?'sev-crit':sev==='high'?'sev-high':'sev-elev';
    return '<span class="sev-badge '+cls+'">'+sev.toUpperCase()+'</span>';
  }

  function renderGeoSidebar(){
    var ce=document.getElementById('gListConflicts'),he=document.getElementById('gListHotspots'),ee=document.getElementById('gListEnergy');
    if(ce) ce.innerHTML=CONFLICTS.map(function(c){
      return '<div class="geo-event '+c.sev+'" onclick="flyToGeo('+c.lat+','+c.lng+')" title="Click to zoom"><div class="geo-evname">'+c.name+sevBadge(c.sev)+'</div><div class="geo-evdesc">'+c.detail+'</div></div>';
    }).join('');
    if(he) he.innerHTML=HOTSPOTS.map(function(h){
      return '<div class="geo-event '+h.sev+'" onclick="flyToGeo('+h.lat+','+h.lng+')" title="Click to zoom"><div class="geo-evname">'+h.name+sevBadge(h.sev)+'</div><div class="geo-evdesc">'+h.detail+'</div></div>';
    }).join('');
    if(ee) ee.innerHTML=ENERGY.slice(0,5).map(function(e){
      return '<div class="geo-event neutral" onclick="flyToGeo('+e.lat+','+e.lng+')" title="Click to zoom"><div class="geo-evname">'+e.icon+' '+e.name+'</div><div class="geo-evdesc">'+e.detail+'</div></div>';
    }).join('');
  }

  // ‚îÄ‚îÄ BOOT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function init(){
    renderCurrencies();
    renderRisk();
    tick();
    fetchFG();
    fetchCrypto();
    initGeoMap();
    setInterval(tick,1000);
    setInterval(function(){fetchFG();fetchCrypto();},60000);
  }

  document.readyState==='loading'?document.addEventListener('DOMContentLoaded',init):init();
}());
</script>
</body>
</html>
